<form class="form" [formGroup]="searchForm" (ngSubmit)="onSubmit()">
  <mat-form-field class="form-field" appearance="outline">
    <input
      matInput
      formControlName="from"
      type="text"
      name="from"
      placeholder="From"
      aria-label="From"
      [matAutocomplete]="autoFrom"
    />

    <mat-icon matPrefix> radio_button_checked </mat-icon>

    <mat-autocomplete #autoFrom="matAutocomplete">
      @for (station of stations(); track station.id) {
        <mat-option [value]="station.city">{{ station.city }}</mat-option>
      }
    </mat-autocomplete>

    @if (from.hasError("required")) {
      <mat-error>Required</mat-error>
    }
  </mat-form-field>

  <button
    class="form-swap"
    type="button"
    mat-mini-fab
    (click)="swapValue()"
    [disabled]="!from.value && !to.value"
  >
    <mat-icon>swap_horiz</mat-icon>
  </button>

  <mat-form-field class="form-field" appearance="outline">
    <input
      matInput
      formControlName="to"
      type="text"
      name="to"
      placeholder="To"
      aria-label="To"
      [matAutocomplete]="autoTo"
    />

    <mat-icon matPrefix> fiber_manual_record </mat-icon>

    <mat-autocomplete #autoTo="matAutocomplete">
      @for (station of stations(); track station.id) {
        <mat-option [value]="station.city">{{ station.city }}</mat-option>
      }
    </mat-autocomplete>

    @if (to.hasError("required")) {
      <mat-error>Required</mat-error>
    }
  </mat-form-field>

  <mat-form-field appearance="outline">
    <input
      matInput
      [matDatepicker]="picker"
      formControlName="time"
      name="time"
    />

    <mat-datepicker-toggle matPrefix [for]="picker" />

    <mat-datepicker #picker />

    @if (time.invalid) {
      <mat-error>{{ timeErrorMessage }}</mat-error>
    }
  </mat-form-field>

  <button
    class="form-control"
    mat-flat-button
    type="submit"
    [disabled]="searchForm.invalid"
  >
    Search
  </button>
</form>
