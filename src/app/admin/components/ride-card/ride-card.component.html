<div class="card">
  <h5 class="title">Ride {{ rideId() }}</h5>
  <div class="content">
    <div class="stations">
      @for (station of stations(); track $index) {
        <div class="station">{{ station }}</div>
      }
    </div>
    <div class="dates-and-prices">
      @for (segment of segments(); track $index) {
        @let edit = editMode()[$index]();

        <div class="row">
          <div class="dates">
            <div class="date-and-icon">
              Departure:

              @if (!edit.departure) {
                {{ segment.time[0] | date: 'yyyy-MM-dd hh-mm a' }}
              } @else {
                <input type="date" [value]="getDateFromISO(segment.time[0])" />
                <input type="time" [value]="getTimeFromISO(segment.time[0])" />
              }

              <mat-icon class="icon" color="primary" (click)="toggleEdit($index, 'departure')">
                {{ edit.departure ? 'save' : 'edit' }}
              </mat-icon>
            </div>
            <div class="date-and-icon">
              Arrival:

              @if (!edit.arrival) {
                {{ segment.time[1] | date: 'yyyy-MM-dd hh-mm a' }}
              } @else {
                <input type="date" [value]="getDateFromISO(segment.time[1])" />
                <input type="time" [value]="getTimeFromISO(segment.time[1])" />
              }

              <mat-icon class="icon" color="primary" (click)="toggleEdit($index, 'arrival')">
                {{ edit.arrival ? 'save' : 'edit' }}
              </mat-icon>
            </div>
          </div>

          <div class="prices">
            <div class="price-and-icon">
              <span>Price</span>
              <mat-icon class="icon" color="primary" (click)="toggleEdit($index, 'price')">
                {{ edit.price ? 'save' : 'edit' }}
              </mat-icon>
            </div>
            @for (price of prices()[$index]; track $index) {
              <div>
                {{ price.type }} -
                @if (!edit.price) {
                  ${{ price.value }}
                } @else {
                  <input type="number" />
                }
              </div>
            }
          </div>
        </div>
      }
    </div>
  </div>
</div>
