<h2 mat-dialog-title class="header">
  Route {{ data.rideId }}
  <span class="spacer"></span>
  <button mat-icon-button mat-dialog-close>
    <mat-icon>close</mat-icon>
  </button>
</h2>
<mat-divider></mat-divider>
<mat-dialog-content class="content">
  @if (isLoading()) {
    <div class="spinner-container">
      <mat-spinner class="spinner" />
      <div class="label">Loading the trip info</div>
    </div>
  } @else {
    <mat-stepper orientation="vertical" #stepper>
      @for (stop of routeData(); track $index) {
        @let arrival = stop.arrival | date: "HH:mm";
        @let departure = stop.departure | date: "HH:mm";

        <div class="station">
          <mat-step completed="false">
            <ng-template matStepLabel>
              <div class="step-label">
                {{ stop.city }}
                <span class="spacer"></span>
                <span>
                  @if ($first) {
                    {{ routeData()[0].departure | date: "MMMM d, HH:mm" }}
                  } @else if ($last) {
                    {{ routeData()[routeData().length - 1].arrival | date: "MMMM d, HH:mm" }}
                  } @else {
                    {{ stop.dwellTime }} min
                  }
                </span>
              </div>
            </ng-template>

            <div class="schedule">
              @if (arrival) {
                <p>Arrival: {{ stop.arrival | date: "HH:mm" }}</p>
              }
              @if (departure) {
                <p>Departure: {{ stop.departure | date: "HH:mm" }}</p>
              }
            </div>
          </mat-step>
        </div>
      }
    </mat-stepper>
  }
</mat-dialog-content>
